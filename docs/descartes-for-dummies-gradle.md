## Descartes for dummies

### Prerequisites

Install and set-up these programs:

1. [Java 8](https://www.java.com/en/download/help/download_options.xml)
2. [GIT](https://git-scm.com/book/en/v2/Getting-Started-Installing-Git)
3. [Maven](https://maven.apache.org/install.html)
4. [Gradle](https://docs.gradle.org/current/userguide/installation.html)

### Descartes Set-Up
#### Clone Descartes and install it in local maven repository

1. From the root folder, clone the project:
```
git clone https://github.com/STAMP-project/pitest-descartes.git
```
2. Access to the descartes project directory
```
cd  pitest-descartes
```
3. Create descartes jar and install in local maven repository
```
mvn install
```
### Execute an analysis with Descartes
#### Clone and Compile Gradle Project (DHEG)

1. From the root folder, clone the project
```
git clone https://github.com/STAMP-project/dheg.git
```
2. Access to the project directory
```
cd dheg
```
3. Init Gradle
```
gradle init
```
4. Configure Gradle. Open build.gradle file and uncomment row 11 and 31
```groovy
	/*
	 * This build file was generated by the Gradle 'init' task.
	 *
	 * This generated file contains a commented-out sample Java project to get you started.
	 * For more details take a look at the Java Quickstart chapter in the Gradle
	 * user guide available at https://docs.gradle.org/4.1/userguide/tutorial_java_projects.html
	 */


	// Apply the java plugin to add support for Java
	apply plugin: 'java'

	// In this section you declare where to find the dependencies of your project
	repositories {
	    // Use 'jcenter' for resolving your dependencies.
	    // You can declare any Maven/Ivy/file repository here.
	    jcenter()
	}

	// In this section you declare the dependencies for your production and test code
	dependencies {
	    // The production code uses the SLF4J logging API at compile time
	    compile 'org.slf4j:slf4j-api:1.7.25'

	    // Declare the dependency for your favourite test framework you want to use in your tests.
	    // TestNG is also supported by the Gradle Test task. Just change the
	    // testCompile dependency to testCompile 'org.testng:testng:6.8.1' and add
	    // 'test.useTestNG()' to your build script.
	    testCompile 'junit:junit:4.12'
	}

```
5. Build the project
```
gradle build
```

#### Execute Descartes

1. Descartes is a plugin for PIT so they have to be used together. To configure PIT to use Descartes modify build.gradle file of the project adding this configurazion (or copy [this file](dheg-build.gradle) to dheg folder and rename it to build.gradle)

```groovy
buildscript {
  repositories {
    mavenCentral()
    mavenLocal()
  }

//  configurations.maybeCreate("pitest")

  dependencies {
    classpath 'info.solidsoft.gradle.pitest:gradle-pitest-plugin:1.1.9'
//    pitest 'fr.inria.stamp:descartes:0.2-SNAPSHOT'
  }
}

apply plugin: "info.solidsoft.pitest"

pitest {
  targetClasses = ['myWorld*']
//  mutationEngine = "descartes"
}
```

2. Execute PIT using Descartesas mutationEngine
```
cd dheg
gradle pitest
```
3. Check the report
PIT will output an html report to target/pit-reports/YYYYMMDDHHMI folder.

### Conclusion
We hope this quick overview has increased your interest in Descardes usage. Note that this is a very truncated quick-start guide. Now you are ready for more comprehensive details concerning the actions you have just performed. Check out the Descardes Readme Guide.
